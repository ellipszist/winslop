<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Winslop Update Check</title>
    <style>
      :root {
        --bg: #c0c0c0;
        --text: #000;
        --shadowDark: #808080;
        --shadowDarker: #404040;
        --highlight: #ffffff;
      }

      * { box-sizing: border-box; }

      body {
        font-family: Tahoma, "MS Sans Serif", "Segoe UI", sans-serif;
        background: var(--bg);
        color: var(--text);
        padding: 2rem;
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }

      h1 {
        font-size: 1.2rem;
        font-weight: 700;
        margin: 0 0 1rem 0;
      }

      /* Win95-ish panel */
      #status {
        background: var(--bg);
        padding: 1rem;
        width: 100%;
        max-width: 520px;

        border-top: 2px solid var(--highlight);
        border-left: 2px solid var(--highlight);
        border-right: 2px solid var(--shadowDarker);
        border-bottom: 2px solid var(--shadowDarker);

        box-shadow: 1px 1px 0 var(--shadowDark);
        font-size: 1rem;
      }

      a {
        color: #0000ee;
        text-decoration: underline;
        font-weight: 400;
      }

      /* Donation: leave modern look */
      .donate {
        margin-top: 2rem;
        padding: 1.5rem;
        background-color: #e7f5ec;
        border-left: 6px solid #4caf50;
        border-radius: 20px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        max-width: 520px;
        width: 100%;
        font-family: "Segoe UI Variable", "Segoe UI", Tahoma, sans-serif;
      }

      .donate strong {
        display: block;
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
      }

      .donate a {
        margin-top: 1rem;
        display: inline-block;
        padding: 0.6rem 1.2rem;
        background-color: #4caf50;
        color: white;
        border-radius: 8px;
        text-decoration: none;
        transition: background 0.3s ease;
      }

      .donate a:hover {
        background-color: #388e3c;
      }

      .project-follow {
        margin-top: 2rem;
        text-align: center;
      }

      .project-follow a {
        padding: 0.8rem 1.5rem;
        background: #24292f;
        color: white;
        border-radius: 20px;
        text-decoration: none;
        font-size: 1rem;
        transition: background 0.3s ease;
        display: inline-block;
        font-family: "Segoe UI Variable", "Segoe UI", Tahoma, sans-serif;
      }

      .project-follow a:hover {
        background: #0366d6;
      }

      @media (max-width: 600px) {
        body { padding: 1rem; }
        #status, .donate { padding: 1rem; }
      }
    </style>
  </head>

  <body>
    <h1>üîç Winslop Update Check</h1>

    <p id="status">Checking version...</p>

    <div class="donate">
      <strong>üíñ Support Winslop</strong>
      Every donation helps me provide more updates. ‚Äì Thanks, Belim üôè
      <br /><br />
      <a
        href="https://www.paypal.com/paypalme/Hasanovic7"
        target="_blank"
        >üí∏ PayPal</a
      >
      <a
        href="https://ko-fi.com/builtbybel"
        target="_blank"
        style="background-color: #ff5f5f;"
        >‚òï Ko-fi</a
      >
    </div>

    <div class="project-follow">
      <a href="https://github.com/builtbybel/Winslop" target="_blank"
        >üêô View on GitHub</a
      >
    </div>

    <script>
      const latestVersion = "0.41.87";

      function compareVersions(v1, v2) {
        const a = v1.split(".").map(Number);
        const b = v2.split(".").map(Number);
        for (let i = 0; i < Math.max(a.length, b.length); i++) {
          if ((a[i] || 0) < (b[i] || 0)) return -1;
          if ((a[i] || 0) > (b[i] || 0)) return 1;
        }
        return 0;
      }

      function openChangelog(version) {
        // point to Winslop tag
        const url = `https://github.com/builtbybel/Winslop/releases/tag/${version}`;
        window.open(
          url,
          "changelogWindow",
          "width=800,height=600,resizable=yes,scrollbars=yes"
        );
      }

      const params = new URLSearchParams(window.location.search);
      const userVersion = params.get("version");

      const status = document.getElementById("status");

      if (!userVersion) {
        status.innerText =
          "‚ùì No version found. Please open this page from the Winslop app.";
      } else {
        const result = compareVersions(userVersion, latestVersion);

        if (result < 0) {
          status.innerHTML = `
            ‚ö†Ô∏è Your version (${userVersion}) is outdated.<br>
            <strong>Latest version:</strong> ${latestVersion}<br>
            <a href="https://github.com/builtbybel/Winslop/releases" target="_blank">‚¨áÔ∏è Download here</a>
            &nbsp;|&nbsp;
            <a href="#" onclick="openChangelog('${latestVersion}'); return false;">üìÑ View Changelog</a>
          `;
        } else if (result === 0) {
          status.innerHTML = `‚úÖ Your version (${userVersion}) is up to date.`;
        } else {
          status.innerHTML = `‚úÖ Your version (${userVersion}) is newer than the official release (${latestVersion}).<br><em>Note: You may be using a development build.</em>`;
        }
      }
    </script>
  </body>
</html>
